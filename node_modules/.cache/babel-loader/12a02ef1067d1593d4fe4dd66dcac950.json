{"ast":null,"code":"var _jsxFileName = \"/Users/lehaibmt/deploy v2/hiclinic-patient-portal/src/pages/signUp/SignUp.jsx\",\n    _s = $RefreshSig$();\n\nimport { useState } from \"react\";\nimport \"./SignUp.scss\";\nimport LogoImg from \"../../asset/img/logo.png\";\nimport { Formik } from \"formik\";\nimport * as Yup from \"yup\";\nimport { useTranslation } from \"react-i18next\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from \"reactstrap\";\nimport { useAuth } from \"../../store/authenticate/store\";\nimport * as routeType from \"../../constant/route/route\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst SignUp = () => {\n  _s();\n\n  const [OTPModal, setOTPModal] = useState(false);\n  const {\n    t\n  } = useTranslation();\n  const [state, actions] = useAuth();\n  const [OTPValue, setOTPValue] = useState(\"\");\n  const [checkError, setCheckError] = useState(\"\");\n  const history = useHistory();\n  state.accessToken && history.push(state.previousLocation);\n  const initialValues = {\n    email: \"\",\n    password: \"\",\n    fullName: \"\",\n    confirmPassword: \"\"\n  };\n  const validateSchema = Yup.object().shape({\n    email: Yup.string().email(\"Email is not valid\").required(`${t(\"emailIsRequired\")}`).max(50),\n    fullName: Yup.string().matches(/^[_A-z0-9]*((-|\\s)*[_A-z0-9])*$/, `${t(\"noSpecialCharacters\")}`).required(`${t(\"thisFieldIsRequired\")}`).max(30),\n    password: Yup.string().min(8).max(50).required(`${t(\"passwordRequired\")}`),\n    confirmPassword: Yup.string().required(`${t(\"confirmPasswordRequired\")}`).oneOf([Yup.ref(\"password\"), null], `${t(\"matchPassword\")}`)\n  });\n  console.log(state);\n\n  const submitForm = async (values, formActions) => {\n    const data = {\n      email: values.email,\n      password: values.password,\n      fullName: values.fullName\n    };\n    await actions.signUp(data, values.fullName);\n    setTimeout(() => {\n      state.errorMessage && setOTPModal(true);\n    }, 1000);\n    formActions.setSubmitting(false);\n  };\n\n  const closeModal = () => {\n    setOTPModal(false);\n  };\n\n  const confirmSignUp = async () => {\n    await actions.confirmOTP(OTPValue);\n  };\n\n  const OTPChange = e => {\n    setOTPValue(e.target.value);\n  };\n\n  const backToHomePage = () => {\n    history.push(\"/\");\n  };\n\n  const changeToSignInPage = () => {\n    actions.clearErrorMessage();\n    history.push(`${routeType.ROUTE_SIGN_IN}`);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"signup-wrapper\",\n    children: [/*#__PURE__*/_jsxDEV(Formik, {\n      initialValues: initialValues,\n      validationSchema: validateSchema,\n      onSubmit: submitForm,\n      children: formik => {\n        const {\n          errors,\n          isValid,\n          dirty,\n          values,\n          touched,\n          handleChange,\n          handleBlur,\n          handleSubmit\n        } = formik;\n        return /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmit,\n          className: \"signup-form\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"signup-logo\",\n            src: LogoImg,\n            alt: \"hiclinic logo\",\n            onClick: backToHomePage\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"signup-title\",\n            children: t(\"signUp\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 15\n          }, this), state.errorMessage && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"signup-error\",\n            children: state.errorMessage\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n            children: t(\"email\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"signup-form-input\",\n            type: \"text\",\n            onChange: handleChange,\n            onBlur: handleBlur,\n            value: values.email,\n            name: \"email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 15\n          }, this), errors.email && touched.email && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"signup-error\",\n            children: errors.email\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n            children: t(\"fullName\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"signup-form-input\",\n            type: \"text\",\n            onChange: handleChange,\n            onBlur: handleBlur,\n            value: values.fullName,\n            name: \"fullName\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 15\n          }, this), errors.fullName && touched.fullName && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"signup-error\",\n            children: errors.fullName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n            children: t(\"password\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"signup-form-input\",\n            type: \"password\",\n            onChange: handleChange,\n            onBlur: handleBlur,\n            value: values.password,\n            name: \"password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 15\n          }, this), errors.password && touched.password && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"signup-error\",\n            children: errors.password\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n            children: t(\"confirmPassword\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"signup-form-input\",\n            type: \"password\",\n            onChange: handleChange,\n            onBlur: handleBlur,\n            value: values.confirmPassword,\n            name: \"confirmPassword\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 15\n          }, this), errors.confirmPassword && touched.confirmPassword && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"signup-error\",\n            children: errors.confirmPassword\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"signup-btn\",\n            disabled: !errors || !isValid || !dirty,\n            children: t(\"submit\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: t(\"youAlreadyHaveAccount\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              onClick: changeToSignInPage,\n              children: t(\"clickHereToSignIn\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 13\n        }, this);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this), OTPModal && /*#__PURE__*/_jsxDEV(Modal, {\n      isOpen: OTPModal,\n      fade: false,\n      children: [/*#__PURE__*/_jsxDEV(ModalHeader, {\n        children: t(\"OTPCode\")\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(ModalBody, {\n        className: \"otp-wrapper\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"otp-input\",\n          onChange: OTPChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 11\n      }, this), state.errorMessage && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"otp-retry\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: [t(\"ifYouDontHaveAnyOTPCodeSendToYourEmail?\"), \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          children: /*#__PURE__*/_jsxDEV(\"b\", {\n            onClick: actions.resendOTP,\n            children: t(\"reTry\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(ModalFooter, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          color: \"secondary\",\n          onClick: closeModal,\n          children: t(\"cancel\")\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 13\n        }, this), \" \", /*#__PURE__*/_jsxDEV(Button, {\n          color: \"primary\",\n          onClick: confirmSignUp,\n          children: t(\"confirm\")\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 89,\n    columnNumber: 5\n  }, this);\n};\n\n_s(SignUp, \"/OsR08ERF3W+/jSyBDtyz04hMV8=\", false, function () {\n  return [useTranslation, useAuth, useHistory];\n});\n\n_c = SignUp;\nexport default SignUp;\n\nvar _c;\n\n$RefreshReg$(_c, \"SignUp\");","map":{"version":3,"sources":["/Users/lehaibmt/deploy v2/hiclinic-patient-portal/src/pages/signUp/SignUp.jsx"],"names":["useState","LogoImg","Formik","Yup","useTranslation","Link","useHistory","Button","Modal","ModalHeader","ModalBody","ModalFooter","useAuth","routeType","SignUp","OTPModal","setOTPModal","t","state","actions","OTPValue","setOTPValue","checkError","setCheckError","history","accessToken","push","previousLocation","initialValues","email","password","fullName","confirmPassword","validateSchema","object","shape","string","required","max","matches","min","oneOf","ref","console","log","submitForm","values","formActions","data","signUp","setTimeout","errorMessage","setSubmitting","closeModal","confirmSignUp","confirmOTP","OTPChange","e","target","value","backToHomePage","changeToSignInPage","clearErrorMessage","ROUTE_SIGN_IN","formik","errors","isValid","dirty","touched","handleChange","handleBlur","handleSubmit","resendOTP"],"mappings":"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","sourcesContent":["import { useState } from \"react\";\nimport \"./SignUp.scss\";\nimport LogoImg from \"../../asset/img/logo.png\";\n\nimport { Formik } from \"formik\";\nimport * as Yup from \"yup\";\n\nimport { useTranslation } from \"react-i18next\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from \"reactstrap\";\n\nimport { useAuth } from \"../../store/authenticate/store\";\n\nimport * as routeType from \"../../constant/route/route\";\n\nconst SignUp = () => {\n  const [OTPModal, setOTPModal] = useState(false);\n  const { t } = useTranslation();\n  const [state, actions] = useAuth();\n  const [OTPValue, setOTPValue] = useState(\"\");\n  const [checkError, setCheckError] = useState(\"\");\n  const history = useHistory();\n\n  state.accessToken && history.push(state.previousLocation);\n\n  const initialValues = {\n    email: \"\",\n    password: \"\",\n    fullName: \"\",\n    confirmPassword: \"\",\n  };\n\n  const validateSchema = Yup.object().shape({\n    email: Yup.string()\n      .email(\"Email is not valid\")\n      .required(`${t(\"emailIsRequired\")}`)\n      .max(50),\n    fullName: Yup.string()\n      .matches(/^[_A-z0-9]*((-|\\s)*[_A-z0-9])*$/, `${t(\"noSpecialCharacters\")}`)\n      .required(`${t(\"thisFieldIsRequired\")}`)\n      .max(30),\n    password: Yup.string()\n      .min(8)\n      .max(50)\n      .required(`${t(\"passwordRequired\")}`),\n    confirmPassword: Yup.string()\n      .required(`${t(\"confirmPasswordRequired\")}`)\n      .oneOf([Yup.ref(\"password\"), null], `${t(\"matchPassword\")}`),\n  });\n  console.log(state);\n  const submitForm = async (values, formActions) => {\n    const data = {\n      email: values.email,\n      password: values.password,\n      fullName: values.fullName,\n    };\n\n    await actions.signUp(data, values.fullName);\n\n    setTimeout(() => {\n      state.errorMessage && setOTPModal(true);\n    },1000);\n\n    formActions.setSubmitting(false);\n  };\n\n  const closeModal = () => {\n    setOTPModal(false);\n  };\n\n  const confirmSignUp = async () => {\n    await actions.confirmOTP(OTPValue);\n  };\n\n  const OTPChange = (e) => {\n    setOTPValue(e.target.value);\n  };\n\n  const backToHomePage = () => {\n    history.push(\"/\");\n  };\n\n  const changeToSignInPage = () => {\n    actions.clearErrorMessage();\n    history.push(`${routeType.ROUTE_SIGN_IN}`);\n  };\n\n  return (\n    <div className=\"signup-wrapper\">\n      <Formik\n        initialValues={initialValues}\n        validationSchema={validateSchema}\n        onSubmit={submitForm}\n      >\n        {(formik) => {\n          const {\n            errors,\n            isValid,\n            dirty,\n            values,\n            touched,\n            handleChange,\n            handleBlur,\n            handleSubmit,\n          } = formik;\n          return (\n            <form onSubmit={handleSubmit} className=\"signup-form\">\n              <img\n                className=\"signup-logo\"\n                src={LogoImg}\n                alt=\"hiclinic logo\"\n                onClick={backToHomePage}\n              />\n              <h1 className=\"signup-title\">{t(\"signUp\")}</h1>\n              {state.errorMessage && (\n                <div className=\"signup-error\">{state.errorMessage}</div>\n              )}\n              <b>{t(\"email\")}</b>\n              <input\n                className=\"signup-form-input\"\n                type=\"text\"\n                onChange={handleChange}\n                onBlur={handleBlur}\n                value={values.email}\n                name=\"email\"\n              />\n              {errors.email && touched.email && (\n                <div className=\"signup-error\">{errors.email}</div>\n              )}\n              <b>{t(\"fullName\")}</b>\n              <input\n                className=\"signup-form-input\"\n                type=\"text\"\n                onChange={handleChange}\n                onBlur={handleBlur}\n                value={values.fullName}\n                name=\"fullName\"\n              />\n              {errors.fullName && touched.fullName && (\n                <div className=\"signup-error\">{errors.fullName}</div>\n              )}\n              <b>{t(\"password\")}</b>\n              <input\n                className=\"signup-form-input\"\n                type=\"password\"\n                onChange={handleChange}\n                onBlur={handleBlur}\n                value={values.password}\n                name=\"password\"\n              />\n              {errors.password && touched.password && (\n                <div className=\"signup-error\">{errors.password}</div>\n              )}\n              <b>{t(\"confirmPassword\")}</b>\n              <input\n                className=\"signup-form-input\"\n                type=\"password\"\n                onChange={handleChange}\n                onBlur={handleBlur}\n                value={values.confirmPassword}\n                name=\"confirmPassword\"\n              />\n              {errors.confirmPassword && touched.confirmPassword && (\n                <div className=\"signup-error\">{errors.confirmPassword}</div>\n              )}\n              <button\n                type=\"submit\"\n                className=\"signup-btn\"\n                disabled={!errors || !isValid || !dirty}\n              >\n                {t(\"submit\")}\n              </button>\n              <span>{t(\"youAlreadyHaveAccount\")}</span>\n              <Link>\n                <span onClick={changeToSignInPage}>\n                  {t(\"clickHereToSignIn\")}\n                </span>\n              </Link>\n            </form>\n          );\n        }}\n      </Formik>\n      {OTPModal && (\n        <Modal isOpen={OTPModal} fade={false}>\n          <ModalHeader>{t(\"OTPCode\")}</ModalHeader>\n          <ModalBody className=\"otp-wrapper\">\n            <input className=\"otp-input\" onChange={OTPChange}></input>\n          </ModalBody>\n          {state.errorMessage && (\n            <div className=\"otp-retry\">\n              <span>{t(\"ifYouDontHaveAnyOTPCodeSendToYourEmail?\")} </span>\n              <a>\n                <b onClick={actions.resendOTP}>{t(\"reTry\")}</b>\n              </a>\n            </div>\n          )}\n\n          <ModalFooter>\n            <Button color=\"secondary\" onClick={closeModal}>\n              {t(\"cancel\")}\n            </Button>{\" \"}\n            <Button color=\"primary\" onClick={confirmSignUp}>\n              {t(\"confirm\")}\n            </Button>\n          </ModalFooter>\n        </Modal>\n      )}\n    </div>\n  );\n};\n\nexport default SignUp;\n"]},"metadata":{},"sourceType":"module"}